<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>How to update things</title>
	<style>
		body {margin: 0;}
	</style>
</head>
<body>
<script type="module">
	import * as THREE from '../../../src/Three.js';

	// 初始化renderer 设置大小 添加节点
	const renderer = new THREE.WebGLRenderer();
	renderer.setSize( window.innerWidth, window.innerHeight );
	document.body.appendChild( renderer.domElement );

	// 初始化相机 设置初始位置 查看的点
	const camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 500 );
	camera.position.set( 0, 0, 100 );
	camera.lookAt( 0, 0, 0 );

	// 创建场景
	const scene = new THREE.Scene();

	const MAX_POINTS = 500;
	const geometry = new THREE.BufferGeometry();
	const positions = new Float32Array( MAX_POINTS * 3 );
	geometry.setAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );

	const drawCount = 2;
	geometry.setDrawRange( 0, drawCount );

	const material = new THREE.LineBasicMaterial( { color: 0xff0000 } );

	const line = new THREE.Line( geometry, material );
	scene.add( line );

	function draw(){

		const positions = line.geometry.attributes.position.array;

		let x, y, z, index;
		x = y = z = index = 0;

		for ( let i = 0, l = MAX_POINTS; i < l; i++) {
			positions[ index ++ ] = x;
			positions[ index ++ ] = y;
			positions[ index ++ ] = z;

			x += ( Math.random() - 0.5 ) * 30;
			y += ( Math.random() - 0.5 ) * 30;
			z += ( Math.random() - 0.5 ) * 30;

		}
	}

	line.geometry.attributes.position.needsUpdate = true;
	// 开始渲染
	renderer.render( scene, camera );

</script>
</body>
</html>
